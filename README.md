# Chrome Clip as Markdown

ウェブページのコンテンツを選択して Markdown 形式で抽出する Chrome 拡張機能です。メインコンテンツを賢く特定し、見出しやリスト構造を保ったままクリップボードにコピーできます。

## 特徴

- インタラクティブなコンテンツ選択

  - マウスホバーでコンテンツ領域のプレビュー表示
  - クリックで選択した領域を Markdown 形式で抽出
  - 視覚的フィードバックによる直感的な操作

- スマートなコンテンツ検出

  - article や main などのセマンティックタグの優先
  - テキスト量と構造に基づくスコアリング
  - 見出しや段落の存在を考慮した最適な範囲の特定

- Markdown 形式の出力
  - 見出し（h1-h6）を`#`記法で表現
  - リスト項目を`-`記法で表現
  - 段落間の適切な空行の挿入
  - ブロック要素の後に改行を追加

## インストール方法

1. このリポジトリをクローンまたはダウンロード
2. Chrome で`chrome://extensions`を開く
3. 右上の「デベロッパーモード」をオンにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードしたフォルダを選択

## 使い方

1. 拡張機能のアイコンをクリックして選択モードを開始
2. マウスを動かすと、コンテンツ領域が青い枠でハイライト表示
3. 目的の領域をクリックすると、その部分が Markdown 形式でクリップボードにコピー
4. コピー完了後、自動的に選択モードが終了

## 仕様詳細

### コンテンツ検出アルゴリズム

コンテンツの特定は以下の要素を考慮したスコアリングシステムにより行われます：

1. タグの重要度

   - article: 10 点
   - main: 10 点
   - section: 5 点
   - div: 1 点

2. コンテンツの充実度
   - テキスト量: 100 文字ごとに 1 点（最大 10 点）
   - 見出し（h1-h3）: 1 つにつき 2 点
   - 段落: 1 つにつき 1 点

### Markdown への変換ルール

1. 見出し

   ```markdown
   # h1 のテキスト

   ## h2 のテキスト

   ### h3 のテキスト
   ```

2. リスト

   ```markdown
   - リストアイテム 1
   - リストアイテム 2
   ```

3. 段落

   ```markdown
   段落 1 のテキスト

   段落 2 のテキスト
   ```

### 優先度の高いセレクタ

以下のセレクタを優先的にチェックします：

- article
- main
- [role="main"]
- .post-content
- .article-content
- .entry-content
- .content
- #main-content

## プロジェクト構成

```
chrome-clip-as-md/
├── manifest.json    # 拡張機能の設定ファイル
├── background.js    # バックグラウンドスクリプト
└── content.js       # コンテンツスクリプト
```

## 今後の改善予定

- [ ] キーボードショートカットのサポート（Esc でキャンセルなど）
- [ ] コピー完了時の視覚的フィードバック強化
- [ ] 選択モード時のアイコン変更
- [ ] 表やコードブロックなど、より多くの Markdown 要素のサポート
- [ ] カスタマイズ設定の追加（ハイライトカラーの変更など）

## 技術的な注意点

1. コンテンツスクリプトは`document_start`タイミングで実行
2. クリップボード操作には`clipboardWrite`権限を使用
3. アクティブタブでのみ動作する`activeTab`権限を使用
